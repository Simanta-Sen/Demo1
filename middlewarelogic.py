Middleware logic has been created.

Changes made by SD2
